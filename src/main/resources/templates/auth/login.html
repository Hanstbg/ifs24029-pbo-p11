<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Login - WorldPass</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,600;0,700;1,400&family=Plus+Jakarta+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* THEME: Midnight Azure Enhanced */
            --bg-deep: #020617;
            --bg-card: #0f172a;
            
            /* Text Colors */
            --text-main: #ffffff;
            --text-body: #e2e8f0;
            --text-muted: #cbd5e1;
            
            --accent-blue: #38bdf8;
            --accent-gold: #fbbf24;
        }

        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: var(--bg-deep);
            color: var(--text-body);
            height: 100vh; 
            overflow: hidden; 
        }

        .serif-font { font-family: 'Playfair Display', serif; }

        .login-wrapper { height: 100%; display: flex; }
        
        /* Left Side (Image) */
        .login-image {
            flex: 1;
            background: url('https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80') no-repeat center center/cover;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .login-image::before {
            content: ''; position: absolute; top:0; left:0; right:0; bottom:0;
            background: linear-gradient(135deg, rgba(2, 6, 23, 0.4), rgba(2, 6, 23, 0.95));
        }
        .image-caption {
            position: relative; color: white; text-align: center; padding: 40px; z-index: 2;
        }
        
        /* Typography Effects */
        .text-gradient-gold {
            background: linear-gradient(to right, #fefce8, #fcd34d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(251, 191, 36, 0.3);
        }

        /* Right Side (Form) */
        .login-form-container {
            width: 550px;
            background: var(--bg-deep);
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 50px;
            position: relative;
            border-left: 1px solid rgba(56, 189, 248, 0.1);
        }
        
        /* Form Inputs */
        .form-control { 
            padding: 14px 15px; 
            border-radius: 12px; 
            border: 1px solid rgba(255,255,255,0.15); 
            background: rgba(30, 41, 59, 0.6); 
            color: #ffffff !important;
            font-size: 1rem;
            transition: all 0.3s;
        }
        .form-control:focus { 
            border-color: var(--accent-blue); 
            box-shadow: 0 0 0 4px rgba(56, 189, 248, 0.15); 
            background: rgba(30, 41, 59, 0.9); 
        }
        .form-control::placeholder { color: rgba(255, 255, 255, 0.4); font-weight: 300; }
        
        .input-group-text {
            background: rgba(30, 41, 59, 0.6);
            border: 1px solid rgba(255,255,255,0.15);
            border-right: none;
            color: var(--accent-blue);
        }

        /* --- NEW: Eye Button Styling --- */
        .btn-eye {
            background: rgba(30, 41, 59, 0.6);
            border: 1px solid rgba(255,255,255,0.15);
            border-left: none; /* Connect to input */
            color: var(--text-muted);
            border-top-right-radius: 12px !important;
            border-bottom-right-radius: 12px !important;
            transition: 0.3s;
        }
        .btn-eye:hover {
            background: rgba(30, 41, 59, 0.9);
            color: var(--accent-blue);
            border-color: rgba(255,255,255,0.15);
        }
        
        /* Label Styling */
        .form-label {
            color: var(--text-muted);
            font-size: 0.85rem;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        /* Button Styling */
        .btn-primary { 
            background: linear-gradient(135deg, #0284c7, #3b82f6); 
            border: none; padding: 15px; border-radius: 12px; 
            font-weight: 700; width: 100%; letter-spacing: 0.5px;
            color: white;
            box-shadow: 0 4px 15px rgba(2, 132, 199, 0.4);
            transition: all 0.3s ease;
        }
        .btn-primary:hover { 
            background: linear-gradient(135deg, #38bdf8, #60a5fa); 
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(56, 189, 248, 0.5);
        }

        /* Lang Switcher */
        .lang-switch { position: absolute; top: 30px; right: 30px; }
        .btn-lang {
            background: rgba(255,255,255,0.05); 
            border: 1px solid rgba(255,255,255,0.1); 
            color: var(--text-muted);
            font-size: 0.8rem; padding: 6px 14px; border-radius: 20px; transition: 0.3s;
        }
        .btn-lang:hover, .btn-lang.active { 
            border-color: var(--accent-blue); 
            color: #000;
            background: var(--accent-blue);
            font-weight: bold;
        }

        @media (max-width: 900px) {
            .login-image { display: none; }
            .login-form-container { width: 100%; border-left: none; }
        }
    </style>
</head>
<body>

<div class="login-wrapper">
    <!-- Image Side -->
    <div class="login-image">
        <div class="image-caption">
            <h1 class="display-3 fw-bold serif-font mb-3 text-gradient-gold">WorldPass.</h1>
            <p class="lead fw-light text-white" style="text-shadow: 0 2px 4px rgba(0,0,0,0.5);" data-lang="hero_text">Capture your journey into the eternal night.</p>
        </div>
    </div>

    <!-- Form Side -->
    <div class="login-form-container">
        
        <div class="lang-switch d-flex gap-2">
            <button class="btn-lang" onclick="setLanguage('en')">EN</button>
            <button class="btn-lang" onclick="setLanguage('id')">ID</button>
            <button class="btn-lang" onclick="setLanguage('jp')">JP</button>
        </div>

        <div class="mb-5">
            <h2 class="fw-bold serif-font text-white mb-2" style="font-size: 2.5rem;" data-lang="welcome_title">Welcome Back</h2>
            <p class="text-body opacity-75" style="font-size: 1.1rem;" data-lang="welcome_sub">Enter your credentials to access your chronicles.</p>
        </div>

        <!-- Alerts -->
        <div th:if="${error}" class="alert alert-danger bg-danger bg-opacity-10 border border-danger text-danger rounded-3 fade show d-flex align-items-center" role="alert">
            <i class="fas fa-exclamation-triangle me-3 fs-5"></i> <span th:text="${error}">Error</span>
        </div>
        <div th:if="${success}" class="alert alert-success bg-success bg-opacity-10 border border-success text-success rounded-3 fade show" role="alert">
            <i class="fas fa-check-circle me-2"></i> <span th:text="${success}">Success</span>
        </div>
        <div th:if="${info}" class="alert alert-info bg-info bg-opacity-10 border border-info text-info rounded-3 fade show" role="alert">
            <i class="fas fa-info-circle me-2"></i> <span th:text="${info}">Info</span>
        </div>

        <form action="/auth/login" method="post">
            <div class="mb-4">
                <label class="form-label text-uppercase" data-lang="lbl_username">Username</label>
                <div class="input-group">
                    <span class="input-group-text"><i class="fas fa-user"></i></span>
                    <input type="text" name="username" class="form-control border-start-0 ps-0" data-placeholder="ph_username" placeholder="Enter username" required autofocus>
                </div>
            </div>
            
            <!-- PASSWORD FIELD WITH SHOW/HIDE TOGGLE -->
            <div class="mb-5">
                <label class="form-label text-uppercase" data-lang="lbl_password">Password</label>
                <div class="input-group">
                    <span class="input-group-text"><i class="fas fa-lock"></i></span>
                    <!-- Tambahkan ID, border-end-0 untuk menghilangkan garis kanan -->
                    <input type="password" name="password" id="passwordInput" class="form-control border-start-0 border-end-0 ps-0" data-placeholder="ph_password" placeholder="Enter password" required>
                    <!-- Tombol Mata -->
                    <button class="btn btn-eye" type="button" onclick="togglePassword()">
                        <i class="fas fa-eye" id="toggleIcon"></i>
                    </button>
                </div>
            </div>

            <button type="submit" class="btn btn-primary mb-4" data-lang="btn_login">Sign In</button>
            
            <p class="text-center text-muted small">
                <span data-lang="no_account">Don't have an account?</span> 
                <a href="/auth/register" class="text-decoration-none fw-bold ms-1" style="color: var(--accent-blue); font-size: 1rem;" data-lang="link_register">Register Now</a>
            </p>
        </form>
    </div>
</div>

<script>
    // --- FITUR TOGGLE PASSWORD ---
    function togglePassword() {
        const input = document.getElementById('passwordInput');
        const icon = document.getElementById('toggleIcon');
        
        if (input.type === "password") {
            input.type = "text";
            icon.classList.remove('fa-eye');
            icon.classList.add('fa-eye-slash');
        } else {
            input.type = "password";
            icon.classList.remove('fa-eye-slash');
            icon.classList.add('fa-eye');
        }
    }
    // -----------------------------

    const translations = {
        en: { 
            hero_text: "Capture your journey into the eternal night.",
            welcome_title: "Welcome Back", welcome_sub: "Enter your credentials to access your chronicles.",
            lbl_username: "Username", ph_username: "Enter username",
            lbl_password: "Password", ph_password: "Enter password",
            btn_login: "Sign In", no_account: "Don't have an account?", link_register: "Register Now"
        },
        id: { 
            hero_text: "Abadikan perjalananmu dalam keabadian malam.",
            welcome_title: "Selamat Datang", welcome_sub: "Masuk untuk melanjutkan petualangan.",
            lbl_username: "Username", ph_username: "Masukkan username",
            lbl_password: "Kata Sandi", ph_password: "Masukkan kata sandi",
            btn_login: "Masuk", no_account: "Belum punya akun?", link_register: "Daftar Sekarang"
        },
        jp: { 
            hero_text: "永遠の夜にあなたの旅を刻みましょう。",
            welcome_title: "おかえりなさい", welcome_sub: "ログインして記録にアクセスしてください。",
            lbl_username: "ユーザー名", ph_username: "ユーザー名を入力",
            lbl_password: "パスワード", ph_password: "パスワードを入力",
            btn_login: "ログイン", no_account: "アカウントをお持ちでないですか？", link_register: "今すぐ登録"
        }
    };

    function setLanguage(lang) {
        localStorage.setItem('worldpass_lang', lang);
        document.querySelectorAll('.btn-lang').forEach(btn => {
            btn.classList.toggle('active', btn.innerText.toLowerCase() === lang);
        });
        document.querySelectorAll('[data-lang]').forEach(el => {
            const key = el.getAttribute('data-lang');
            if (translations[lang][key]) el.innerText = translations[lang][key];
        });
        document.querySelectorAll('[data-placeholder]').forEach(el => {
            const key = el.getAttribute('data-placeholder');
            if (translations[lang][key]) el.placeholder = translations[lang][key];
        });
    }

    document.addEventListener('DOMContentLoaded', () => {
        const savedLang = localStorage.getItem('worldpass_lang') || 'en';
        setLanguage(savedLang);
    });
</script>

</body>
</html>